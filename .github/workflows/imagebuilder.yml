name: immortalwrt-imagebuilder-23.05-SNAPSHOT

on:
  workflow_dispatch:

  schedule:
    - cron: 0 0 * * *

jobs:
  Config:
    runs-on: ubuntu-latest

    steps:
      - name: Requirements
        run: |
          wget -q https://downloads.immortalwrt.org/releases/23.05-SNAPSHOT/targets/rockchip/armv8/immortalwrt-imagebuilder-23.05-SNAPSHOT-rockchip-armv8.Linux-x86_64.tar.xz
          tar -xJf *.tar.xz
          cd immortalwrt-imagebuilder-23.05-SNAPSHOT-rockchip-armv8.Linux-x86_64
          make image
          tar -zcvf targets.tar bin/targets/* 
      - name: Upload Image
        uses: actions/upload-artifact@v3
        with:
          name: targets.tar
          path: targets.tar
